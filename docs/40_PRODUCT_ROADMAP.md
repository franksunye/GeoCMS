# GeoCMS 产品演进路线图

## 文档说明

本文档描述了 GeoCMS 项目下一阶段的重构、扩展和升级规划。基于当前的 AI Native 架构（Planner Agent + Writer Agent），我们计划演进为更完整的三 Agent 架构（知识库 Agent + 策划 Agent + 生成 Agent），实现"品牌知识库 → 内容输出"的完整闭环流程。

本规划定位为 MVP（最小可行产品），目标是快速验证产品思路、实现可用闭环，为后续的功能扩展和商业化奠定基础。

---

## 1. 业务需求概述

### 1.1 背景与目标

* 品牌方希望借助 AI 代理（Agent）技术，实现「品牌知识库 → 内容输出」的闭环流程，提升内容生产效率、保持品牌一致性、加快网站/博客更新频率。
* 本项目定位为 MVP（最小可行产品）：采用 **三个 Agent（知识库 Agent／策划 Agent／生成 Agent）** 的架构，由人工负责编辑/发布环节。目标是快速验证产品思路、实现一个可用闭环。
* 输出场景包括：

  * 主站页面（如一句话品牌介绍／模板化页面／上传图片+用户输入生成）
  * 博客文章（日更或频繁更新，内容策略输入）
  * （后期可扩展但 MVP 阶段不优先）社交贴文、推文、网站其他子页面。

### 1.2 功能需求

#### 品牌知识库功能

* 用户（品牌运营／编辑）能够输入品牌介绍、产品/服务说明、联系方式、常见问题（FAQ）等结构化／半结构化数据。
* 系统自动将输入内容进行整理、分块、摘要、索引，构建可供 Agent 检索使用的知识库。
* 支持向量检索或全文索引，用于后续的内容生成调用。

#### 策划 Agent 功能

* 用户输入：内容主题、目标受众、风格要求、更新频率。
* 系统（策划 Agent）调用知识库，从中抽取素材，生成"内容计划草案"，包括：标题建议、关键词、文章大纲、风格说明等。
* 用户审核/确认该计划（可编辑/反馈）。

#### 生成 Agent 功能

* 接收已确认的内容计划及素材，自动生成草稿文章、页面文本等，输出格式可为 Markdown／HTML 或其他适合编辑的格式。
* 草稿内容需包含品牌语调、关键词、文章结构、，并可建议配图/模板（若适用）。
* 生成完成后，由人工编辑/审核，然后人工进行发布。

#### 人-在回路（HITL）与发布流程

* 虽然 MVP 阶段不由 Agent 直接发布，但流程应设计为"生成 → 人编辑 → 发布"，确保品牌质量控制。
* 系统应记录生成结果、用户编辑反馈，以便后续优化。

#### 适用场景／约束

* 初期只支持单语言（例如中文或英文），模板格式简化。
* 主站页面更新、博客内容为先，社交贴文、图片生成暂不优先。
* 系统须保证输出内容与品牌知识库一致，避免脱离品牌语调／错误信息。
* 用户界面需简洁，用户训练成本低。

### 1.3 非功能需求

* **可扩展性**：后期应支持加入更多 Agent （例如：编辑 Agent、社交 Agent、图片 Agent、监控 Agent）且减少改造成本。
* **性能**：生成草稿响应时间可容忍数秒至十数秒。
* **可维护性**：知识库模块、策划 Agent、生成 Agent 模块清晰分离，各模块独立调试。
* **安全／权限**：品牌输入内容仅限品牌方或授权用户编辑，生成草稿为内部可见，发布需人工审核。
* **品牌一致性**：生成内容需遵循品牌语调、关键词标准，系统应支持品牌语调提示配置。

---

## 2. 技术设计方案

### 2.1 架构概览

采用"三 Agent"架构，整体流程如下：

```
用户（输入主题/风格）  
      ↓  
策划 Agent  
      ↑  
知识库 Agent → （素材包） → 策划 Agent → （内容计划） → 生成 Agent → （草稿输出） → 人工 编辑／审核 → 人工 发布  
```

### 2.2 模块职责

#### 知识库 Agent

* **功能**：接收并索引品牌内容（品牌介绍、产品服务、FAQ 等）；为策划 Agent 提供素材。
* **技术实现**：

  * 数据储存：结构化（数据库表）+ 半结构化（文档、Markdown）存储。
  * 向量索引：使用 LlamaIndex、ChromaDB 或其他 vector DB。
  * 检索逻辑：基于用户主题/关键词 → 向量检索 → 摘要/过滤 → 返回素材包。

#### 策划 Agent

* **功能**：基于用户输入 + 素材包，生成内容计划草案（标题、关键词、大纲、风格说明）。
* **技术实现**：

  * 提示模板：设计 LLM 提示，输入包含用户需求 + 素材包，输出为结构化 JSON。
  * 用户界面：用户输入主题/风格，查看并可编辑草案。
  * 确认机制：用户确认草案后，触发生成 Agent。

#### 生成 Agent

* **功能**：根据已确认内容计划 + 素材包，生成初稿内容。
* **技术实现**：

  * 提示模板：输入标题/大纲/关键词/风格 + 素材包 → 输出文章文本（Markdown／HTML）。
  * 输出格式：便于编辑器加载，比如 Markdown + 配图建议字段。
  * 版本记录：保存生成草稿版本，供用户编辑。

#### 人工编辑／审核 + 发布

* **编辑界面**：用户接收草稿，进行修改、补充、调整语调。
* **审核流程**：用户/运营确认无误后进行发布。
* **发布机制**：可调用 CMS 或静态站发布流程，也可导出 HTML/markdown 文件人工上传。

### 2.3 接口设计

#### Agent 间数据结构

各 Agent 间数据结构统一（如 JSON 接口）：

```json
{
  "plan": [
    {
      "title": "...",
      "keywords": ["...","..."],
      "outline": "...",
      "style": "..."
    }
  ]
}
```

#### 知识库素材包结构

```json
{
  "brand_summary": "...",
  "product_list": [
    {"name":"...","description":"..."}
  ],
  "faq": [
    {"q":"...","a":"..."}
  ]
}
```

### 2.4 技术选型建议

* **框架**：推荐 LangChain 用于 MVP 阶段；若未来流程复杂可切换至 LangGraph。
* **向量库/检索**：ChromaDB、Pinecone 或 LlamaIndex ＋向量DB。
* **后端**：Python + FastAPI（或类似）实现 Agent 调用接口。
* **前端**：简洁 React/Next.js 或 Vue 界面，供用户输入主题、审批草稿。
* **数据存储**：品牌知识库（PostgreSQL／MongoDB） + 文档存储／对象存储（如 S3）+ 向量索引。
* **模型调用**：可调用 OpenAI GPT-4 或开源模型（如 Llama 系列）视预算。
* **日志／反馈系统**：记录生成内容、用户编辑反馈、审批状态，为后续训练优化。

### 2.5 数据流 & 流程图

（此处可插入流程图：知识库 → 策划 → 生成 → 编辑 → 发布）

* 用户提交主题 → 策划 Agent 请求知识库 Agent 获取素材 → 策划 Agent 生成内容计划 → 用户确认 → 生成 Agent 生成草稿 → 用户编辑／审核 → 发布。
* 在接口层：知识库 Agent 输出 → 策划 Agent 输入；策划 Agent 输出 → 生成 Agent 输入。

### 2.6 可扩展性 & 未来升级

* **多 Agent 支持**：未来可新增"编辑 Agent"、"社交贴文 Agent"、"图片生成 Agent"、"监控 Agent"。
* **模板库化**：用户可选择多种模板（博客、主站一句话、贴文、上传图片模版） → Agent 填充。
* **多语言支持**：知识库、提示模板、生成模型拓展至多语言。
* **自动发布**：将人工发布步骤逐步自动化，Agent 负责最终发布。
* **自动监控**：新增监控 Agent 获取内容上线后数据（浏览量、社交分享）→ 反馈至策划 Agent/生成 Agent 优化。

### 2.7 风险及应对

* **品牌一致性风险**：生成内容可能偏离品牌语调。**应对**：设立品牌语调提示、人工编辑必经、反馈机制。
* **内容质量波动**：AI 生成初稿质量可能参差。**应对**：初期人工编辑、逐步积累反馈数据优化。
* **用户编辑负担**：如果草稿质量低，编辑负担大。**应对**：优化提示、引入高质量素材、对生成 Agent 微调。
* **数据安全／知识库泄露风险**：品牌敏感内容需保护。**应对**：权限控制、加密存储、审计日志。

---

## 3. 时间规划建议

* **阶段 1（0-4 周）**：品牌知识库模块 + 界面输入实现；知识库 Agent 初步检索功能。
* **阶段 2（4-8 周）**：策划 Agent 开发 + 用户输入界面 +生成内容计划。
* **阶段 3（8-12 周）**：生成 Agent 开发 +草稿生成功能 +人工编辑界面。
* **阶段 4（12-16 周）**：整合流程 +测试闭环＋首次上线博客文章。
* **阶段 5（后续）**：优化模板库、多语言、自动发布、监控 Agent 等扩展。

---

## 4. 与当前架构的关系

### 4.1 当前架构回顾

当前 GeoCMS 采用 AI Native 架构，包含：
- **Planner Agent**：提示词分析和任务规划
- **Writer Agent**：内容生成和格式化
- **知识库模块**：已实现基础的知识库存储和检索功能

### 4.2 演进路径

本次升级将在现有基础上进行演进：
1. **知识库模块增强**：从当前的基础知识库升级为完整的知识库 Agent，增加向量检索、素材包生成等功能。
2. **Planner Agent 升级**：升级为策划 Agent，增强内容计划生成能力，支持用户交互和反馈。
3. **Writer Agent 升级**：升级为生成 Agent，增强草稿生成质量，支持多种输出格式。
4. **新增 HITL 流程**：引入人工编辑和审核环节，确保内容质量。

### 4.3 兼容性考虑

* 保持现有 API 接口的向后兼容性
* 逐步迁移现有功能到新架构
* 支持新旧架构并行运行，平滑过渡

---

## 5. 下一步行动

1. **技术调研**：评估向量数据库选型（ChromaDB vs Pinecone vs LlamaIndex）
2. **架构设计细化**：详细设计三 Agent 间的接口和数据流
3. **原型开发**：开发知识库 Agent 原型，验证技术可行性
4. **用户研究**：与潜在用户沟通，验证业务需求和使用场景
5. **项目启动**：组建团队，启动阶段 1 开发工作

